# FinnewsHunter 环境变量配置模板
# 复制此文件为 .env 并填入实际值

# ===== 应用配置 =====
APP_NAME=FinnewsHunter
APP_VERSION=0.1.0
DEBUG=True

# ===== 服务器配置 =====
HOST=0.0.0.0
PORT=8000

# ===== 数据库配置 =====
POSTGRES_USER=finnews
POSTGRES_PASSWORD=finnews_dev_password
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=finnews_db

# ===== Redis 配置 =====
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
# REDIS_PASSWORD=  # 可选，生产环境建议设置

# ===== Milvus 配置 =====
MILVUS_HOST=localhost
MILVUS_PORT=19530
MILVUS_COLLECTION_NAME=finnews_embeddings

# ⚠️ 重要：向量维度必须与 Embedding 模型匹配
# - OpenAI text-embedding-ada-002: 1536 维
# - 百炼 text-embedding-v4: 1024 维
MILVUS_DIM=1536

# ===== Neo4j 知识图谱配置 =====
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=finnews_neo4j_password

# ==========================================
# LLM 和 Embedding 配置
# ==========================================
# 支持5个厂商：bailian、openai、deepseek、kimi、zhipu
# 前端可以动态切换，后端需要配置对应的 API Key

# ===== 默认LLM配置（可选，用于后端默认行为） =====
LLM_PROVIDER=bailian  # 默认提供商
LLM_MODEL=qwen-plus   # 默认模型
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000
LLM_TIMEOUT=180  # LLM 调用超时时间（秒）

# ==========================================
# 各厂商 API Key 配置
# ==========================================
# ⚠️ 注意：前端可以切换任意厂商，请配置所有需要使用的厂商的 API Key

# ----- 1. 百炼（Bailian / 阿里云）-----
# 获取地址：https://dashscope.console.aliyun.com/
DASHSCOPE_API_KEY=your-dashscope-api-key-here
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
# 可用模型列表（逗号分隔，可自定义添加新模型）
BAILIAN_MODELS=qwen-plus,qwen-max,qwen-turbo,qwen-long
# 百炼可选配置（如需使用 Agent 功能）
# BAILIAN_ACCESS_KEY_ID=your-access-key-id
# BAILIAN_ACCESS_KEY_SECRET=your-access-key-secret
# BAILIAN_AGENT_CODE=your-agent-code
# BAILIAN_REGION_ID=cn-beijing

# ----- 2. OpenAI -----
# 获取地址：https://platform.openai.com/api-keys
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_BASE_URL=  # 留空使用官方 API，或填写代理地址
# 可用模型列表（逗号分隔，可自定义添加新模型）
OPENAI_MODELS=gpt-4,gpt-4-turbo,gpt-3.5-turbo

# ----- 3. DeepSeek -----
# 获取地址：https://platform.deepseek.com/api_keys
DEEPSEEK_API_KEY=your-deepseek-api-key-here
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1  # 默认值，可不填
# 可用模型列表（逗号分隔，可自定义添加新模型）
DEEPSEEK_MODELS=deepseek-chat,deepseek-coder

# ----- 4. Kimi (Moonshot) -----
# 获取地址：https://platform.moonshot.cn/console/api-keys
MOONSHOT_API_KEY=your-moonshot-api-key-here
MOONSHOT_BASE_URL=https://api.moonshot.cn/v1  # 默认值，可不填
# 可用模型列表（逗号分隔，可自定义添加新模型）
MOONSHOT_MODELS=moonshot-v1-8k,moonshot-v1-32k,moonshot-v1-128k

# ----- 5. 智谱 (Zhipu AI) -----
# 获取地址：https://open.bigmodel.cn/usercenter/apikeys
ZHIPU_API_KEY=your-zhipu-api-key-here
ZHIPU_BASE_URL=https://open.bigmodel.cn/api/paas/v4  # 默认值，可不填
# 可用模型列表（逗号分隔，可自定义添加新模型）
ZHIPU_MODELS=glm-4,glm-4-plus,glm-4-air,glm-3-turbo

# ----- 6. BochaAI (Web Search API) -----
# 获取地址：https://bochaai.com/
# 用于定向爬取股票新闻时的搜索引擎
BOCHAAI_API_KEY=your-bochaai-api-key-here
BOCHAAI_ENDPOINT=https://api.bochaai.com/v1/web-search  # 默认值，可不填

# ==========================================
# Embedding 配置
# ==========================================
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-ada-002
EMBEDDING_BATCH_SIZE=100
# EMBEDDING_BASE_URL=  # 留空使用官方 API

# ⚠️ 使用百炼 Embedding 时的配置示例：
# EMBEDDING_PROVIDER=openai
# EMBEDDING_MODEL=text-embedding-v4
# EMBEDDING_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
# MILVUS_DIM=1024  # 百炼 embedding 是 1024 维

# ===== 爬取间隔配置（多源支持）=====
CRAWL_INTERVAL_SINA=60  # 新浪财经爬取间隔（秒）
CRAWL_INTERVAL_TENCENT=60  # 腾讯财经爬取间隔（秒）
CRAWL_INTERVAL_JWVIEW=60  # 中新经纬爬取间隔（秒）
CRAWL_INTERVAL_EEO=60  # 经济观察网爬取间隔（秒）
CRAWL_INTERVAL_CAIJING=60  # 财经网爬取间隔（秒）
CRAWL_INTERVAL_JINGJI21=60  # 21经济网爬取间隔（秒）

# ===== 实时爬取与缓存配置 =====
CACHE_TTL=1800  # 缓存过期时间（秒），默认30分钟
NEWS_RETENTION_HOURS=24  # 新闻保留时间（小时），默认24小时
FRONTEND_REFETCH_INTERVAL=180  # 前端自动刷新间隔（秒），默认3分钟

# ===== 爬虫配置 =====
CRAWLER_TIMEOUT=30
CRAWLER_MAX_RETRIES=3
CRAWLER_DELAY=1.0

# ===== 安全配置 =====
SECRET_KEY=your-secret-key-here-please-change-in-production
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# ===== 日志配置 =====
LOG_LEVEL=INFO
LOG_FILE=logs/finnews.log

# ===== 业务配置 =====
MAX_NEWS_PER_REQUEST=50
NEWS_CACHE_TTL=3600